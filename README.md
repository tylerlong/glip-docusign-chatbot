# Glip DocuSign Chatbot


## Usage

```
curl -X POST \
-H "Content-Type: application/json" \
-d '<?xml version="1.0" encoding="utf-8"?><DocuSignEnvelopeInformation xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.docusign.net/API/3.0"><EnvelopeStatus><RecipientStatuses><RecipientStatus><Type>Signer</Type><Email>tyler.liu@ringcentral.com</Email><UserName>Tyler Liu</UserName><RoutingOrder>1</RoutingOrder><Sent>2020-05-19T13:43:50.85</Sent><DeclineReason xsi:nil="true" /><Status>Sent</Status><RecipientIPAddress /><CustomFields><CustomField /><CustomField /><CustomField /></CustomFields><AccountStatus>Active</AccountStatus><RecipientId>8165220d-6fab-470c-bfe4-5496e7ebbfbe</RecipientId></RecipientStatus></RecipientStatuses><TimeGenerated>2020-05-19T13:44:11.4755077</TimeGenerated><EnvelopeID>be6d56a4-afe6-4ce0-812b-8dfef07690aa</EnvelopeID><Subject>Please DocuSign: Test DocuSign Doc</Subject><UserName>Tyler Liu</UserName><Email>tyler.liu@ringcentral.com</Email><Status>Sent</Status><Created>2020-05-19T13:43:32.36</Created><Sent>2020-05-19T13:43:50.867</Sent><ACStatus>Original</ACStatus><ACStatusDate>2020-05-19T13:43:32.36</ACStatusDate><ACHolder>Tyler Liu</ACHolder><ACHolderEmail>tyler.liu@ringcentral.com</ACHolderEmail><ACHolderLocation>DocuSign</ACHolderLocation><SigningLocation>Online</SigningLocation><SenderIPAddress>73.93.155.66   </SenderIPAddress><EnvelopePDFHash /><CustomFields><CustomField><Name>templateUsageRestriction</Name><Show>False</Show><Required>False</Required><Value>allOptions</Value></CustomField></CustomFields><AutoNavigation>true</AutoNavigation><EnvelopeIdStamping>true</EnvelopeIdStamping><AuthoritativeCopy>false</AuthoritativeCopy><DocumentStatuses><DocumentStatus><ID>1</ID><Name>Test DocuSign Doc</Name><TemplateName>My Test Template</TemplateName><Sequence>1</Sequence></DocumentStatus></DocumentStatuses></EnvelopeStatus></DocuSignEnvelopeInformation>' \
https://xxxx.amazonaws.com/prod/webhook
```

## Payload structure

Payload is generated by DocuSign. It should be in XML format.

Its structure is like this (converted to JSON for easy reading):

```json
{
  "DocuSignEnvelopeInformation": {
    "EnvelopeStatus": {
      "RecipientStatuses": {
        "RecipientStatus": {
          "Type": "Signer",
          "Email": "tyler.liu@ringcentral.com",
          "UserName": "Tyler Liu",
          "RoutingOrder": "1",
          "Sent": "2020-05-19T13:43:50.85",
          "DeclineReason": {
            "_xsi:nil": "true"
          },
          "Status": "Sent",
          "RecipientIPAddress": "",
          "CustomFields": {
            "CustomField": [
              "",
              "",
              ""
            ]
          },
          "AccountStatus": "Active",
          "RecipientId": "8165220d-6fab-470c-bfe4-5496e7ebbfbe"
        }
      },
      "TimeGenerated": "2020-05-19T13:44:11.4755077",
      "EnvelopeID": "be6d56a4-afe6-4ce0-812b-8dfef07690aa",
      "Subject": "Please DocuSign: Test DocuSign Doc",
      "UserName": "Tyler Liu",
      "Email": "tyler.liu@ringcentral.com",
      "Status": "Sent",
      "Created": "2020-05-19T13:43:32.36",
      "Sent": "2020-05-19T13:43:50.867",
      "ACStatus": "Original",
      "ACStatusDate": "2020-05-19T13:43:32.36",
      "ACHolder": "Tyler Liu",
      "ACHolderEmail": "tyler.liu@ringcentral.com",
      "ACHolderLocation": "DocuSign",
      "SigningLocation": "Online",
      "SenderIPAddress": "73.93.155.66",
      "EnvelopePDFHash": "",
      "CustomFields": {
        "CustomField": {
          "Name": "templateUsageRestriction",
          "Show": "False",
          "Required": "False",
          "Value": "allOptions"
        }
      },
      "AutoNavigation": "true",
      "EnvelopeIdStamping": "true",
      "AuthoritativeCopy": "false",
      "DocumentStatuses": {
        "DocumentStatus": {
          "ID": "1",
          "Name": "Test DocuSign Doc",
          "TemplateName": "My Test Template",
          "Sequence": "1"
        }
      }
    },
    "_xmlns:xsd": "http://www.w3.org/2001/XMLSchema",
    "_xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
    "_xmlns": "http://www.docusign.net/API/3.0"
  }
}
```


## For maintainers

Please refer to [this](https://github.com/tylerlong/glip-ping-chatbot/tree/lambda).
